{"updatedAt":"2025-11-14T22:08:23.795Z","createdAt":"2025-11-14T05:08:01.286Z","id":"8kmvY6Vzh3pBcBTy","name":"cognos-webhooks","active":true,"isArchived":false,"nodes":[{"parameters":{"workflowId":{"__rl":true,"value":"FYwsWWYM2CIj9bnF","mode":"list","cachedResultUrl":"/workflow/FYwsWWYM2CIj9bnF","cachedResultName":"cognos-runner-pinger"},"workflowInputs":{"mappingMode":"defineBelow","value":{"param":"={{ $json.query }}","rid":"i70FBCF76B2F44DEA960593AA63D4F019"},"matchingColumns":[],"schema":[{"id":"param","displayName":"param","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"object","removed":false},{"id":"rid","displayName":"rid","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.3,"position":[704,0],"id":"cca6ca95-35c6-4a37-b031-02786505ace8","name":"Call 'cognos-webhooks'","retryOnFail":true},{"parameters":{"respondWith":"json","responseBody":"={{ $json.data }}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[1072,0],"id":"378ce92c-e7e3-4c95-8a26-b8c555b99c64","name":"Respond to Webhook"},{"parameters":{"url":"https://gaaaflebo.ecwcloud.com/bi/v1/disp/rds/reportData/report/","sendQuery":true,"queryParameters":{"parameters":[{"name":"fmt","value":"CSV"},{"name":"p_encounterIDs","value":"1331277"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"X-XSRF-TOKEN","value":"={{ $json.parsedCookies['XSRF-TOKEN'] }}"},{"name":"Cookie","value":"={{ $json.cookieHeader }}"}]},"options":{"response":{"response":{"responseFormat":"file"}}}},"name":"Authenticated Request","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[480,-208],"id":"88dcf521-be05-46dc-b96a-6508e470a34f","disabled":true},{"parameters":{"options":{"delimiter":"={{ String.fromCodePoint(9) }}"}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[688,-208],"id":"1dd05ccf-8094-47ce-98c1-a0ceb42f0aa7","name":"tsv to json","disabled":true},{"parameters":{"workflowId":{"__rl":true,"value":"FYwsWWYM2CIj9bnF","mode":"list","cachedResultUrl":"/workflow/FYwsWWYM2CIj9bnF","cachedResultName":"cognos-runner-pinger"},"workflowInputs":{"mappingMode":"defineBelow","value":{"param":"={{ $json.query }}","rid":"i8A3372D0B9E847E3B74A0D21E1D15655"},"matchingColumns":[],"schema":[{"id":"param","displayName":"param","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"object","removed":false},{"id":"rid","displayName":"rid","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.3,"position":[704,208],"id":"36fa1590-51d7-457d-9d9a-75b67b193fb5","name":"Call 'cognos-webhooks'1","retryOnFail":true},{"parameters":{"respondWith":"text","responseBody":"={{ $json.data.substring('JsonOutput\\n'.length).trim() }}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[1072,208],"id":"8bbbfdf6-d2a5-427d-ae5a-095d3515756d","name":"Respond to Webhook1"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"91c9eb0f-b74f-44d7-bafc-c3fbd503f103","leftValue":"","rightValue":"","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[224,-208],"id":"8ba8c2af-bb3c-4176-bd26-a3bae375fb9d","name":"If","disabled":true},{"parameters":{"assignments":{"assignments":[{"id":"de18b582-a741-4c10-8c2c-f0fc72b19e58","name":"query.fmt","value":"datasetJSON","type":"string"}]},"includeOtherFields":true,"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[208,208],"id":"680cfbb3-dc23-4c95-8701-ee1bf336a55b","name":"Edit Fields"},{"parameters":{"path":"/ebo/getUsers","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-48,0],"id":"7c0e0da4-f9ae-4954-84da-c6d3fa086238","name":"getUsers","webhookId":"67050c9d-49c8-433a-903a-04ce247283eb"},{"parameters":{"assignments":{"assignments":[{"id":"cf82b233-1f21-48fb-95cb-f73b454dc6d0","name":"query.fmt","value":"datasetJSON","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[208,0],"id":"b127e9db-3c59-482a-8725-3fc3103a2151","name":"Edit Fields1"},{"parameters":{"path":"/ebo/getRoles","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-48,208],"id":"b96831d8-0c20-41f2-a4bd-331a1fc1ef1e","name":"getRoles","webhookId":"67050c9d-49c8-433a-903a-04ce247283eb"},{"parameters":{"workflowId":{"__rl":true,"value":"FYwsWWYM2CIj9bnF","mode":"list","cachedResultUrl":"/workflow/FYwsWWYM2CIj9bnF","cachedResultName":"cognos-runner-pinger"},"workflowInputs":{"mappingMode":"defineBelow","value":{"param":"={{ $json.query }}","rid":"iE3F153814C6443A68AFBF3B6D3F3212B"},"matchingColumns":[],"schema":[{"id":"param","displayName":"param","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"object","removed":false},{"id":"rid","displayName":"rid","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.3,"position":[704,416],"id":"790a43d0-5cad-471e-8a84-01a996956559","name":"Call 'cognos-webhooks'2","retryOnFail":true},{"parameters":{"respondWith":"text","responseBody":"={{ $json.data }}","options":{}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[1072,416],"id":"ca2d87dc-b4e7-4dba-9dec-0a479655deab","name":"Respond to Webhook2"},{"parameters":{"path":"/ebo/getEncounters","responseMode":"responseNode","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-48,416],"id":"348546ce-fe51-4bf7-bd4a-49113d7d77b4","name":"getEncounters","webhookId":"67050c9d-49c8-433a-903a-04ce247283eb"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"645a11bd-08bb-444c-87af-f537e75358d9","leftValue":"={{ $json.query.p_encounterIDs }}","rightValue":"","operator":{"type":"string","operation":"exists","singleValue":true}},{"id":"23196492-cd2e-46b7-882e-58e4fa16de50","leftValue":"={{ $json.query.p_encounterIDs }}","rightValue":"","operator":{"type":"string","operation":"notEmpty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[416,416],"id":"72518d6a-0bd8-4422-981a-900e74d43048","name":"is 'p_encounterIDs' valid"},{"parameters":{"respondWith":"json","responseBody":"{\n  \"error\": \"invalid query parameter value for p_encounterIDs\"\n}","options":{"responseCode":400}},"type":"n8n-nodes-base.respondToWebhook","typeVersion":1.4,"position":[1072,544],"id":"b346ebab-bce2-4193-badb-fbd7dd92a515","name":"Error"},{"parameters":{"assignments":{"assignments":[{"id":"de18b582-a741-4c10-8c2c-f0fc72b19e58","name":"query.fmt","value":"datasetJSON","type":"string"}]},"includeOtherFields":true,"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[208,416],"id":"d2d344ea-71ae-43ed-82df-419fdcd915a7","name":"Edit Fields2"}],"connections":{"Call 'cognos-webhooks'":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]},"Authenticated Request":{"main":[[{"node":"tsv to json","type":"main","index":0}]]},"Call 'cognos-webhooks'1":{"main":[[{"node":"Respond to Webhook1","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"Call 'cognos-webhooks'1","type":"main","index":0}]]},"getUsers":{"main":[[{"node":"Edit Fields1","type":"main","index":0}]]},"Edit Fields1":{"main":[[{"node":"Call 'cognos-webhooks'","type":"main","index":0}]]},"getRoles":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"Call 'cognos-webhooks'2":{"main":[[{"node":"Respond to Webhook2","type":"main","index":0}]]},"getEncounters":{"main":[[{"node":"Edit Fields2","type":"main","index":0}]]},"is 'p_encounterIDs' valid":{"main":[[{"node":"Call 'cognos-webhooks'2","type":"main","index":0}],[{"node":"Error","type":"main","index":0}]]},"Edit Fields2":{"main":[[{"node":"is 'p_encounterIDs' valid","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{"getEncounters":[{"json":{"headers":{"host":"caha:5678","connection":"keep-alive","dnt":"1","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","accept-encoding":"gzip, deflate","accept-language":"en-US,en;q=0.9"},"params":{},"query":{"p_encounterIDs":"1331277"},"body":{},"webhookUrl":"http://localhost:5678/webhook-test/ebo/getEncounters","executionMode":"test"}}]},"versionId":"975cde88-3317-41bc-a486-bd1ef9d8bdc8","triggerCount":3,"shared":[{"updatedAt":"2025-11-14T05:08:01.286Z","createdAt":"2025-11-14T05:08:01.286Z","role":"workflow:owner","workflowId":"8kmvY6Vzh3pBcBTy","projectId":"Vpl3Dzdj01oU52k6"}],"tags":[]}